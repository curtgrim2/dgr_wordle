<!DOCTYPE>
<html>
    <link rel="stylesheet" href="style.css">
    <body>
        <div>Danganronpa Wordle </div>
        <div id="mainbox">
            Test

            <br>

            <div id="key">Key:
                <br>
                <div style="color:red;">Red=No</div>
                <div style="color:green;">Green=Correct</div>
                ONLY 5 GUESSES!
            </div>


                <span>Name?</span>
                <input type="text" id="theguess"/>
                <span id="submitbutton" onclick="userguessed()" >GUESS</span>

                <br>
                <br>


                <table>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Sex</th>
                        <th>Hair Color</th>
                        <th>Eye Color</th>
                        <th>Height</th>
                        <th>Main Game</th>
                    </tr>

                    <tr class="displayguesses">
                        <td class="displayfirstname"></td>
                        <td class="displaylastname"></td>
                        <td class="displaysex"></td>
                        <td class="displayhaircolor"></td>
                        <td class="displayeyecolor"></td>
                        <td class="displayheight"></td>
                        <td class="displaymaingame"></td>
                    </tr>
                    <tr class="displayguesses">
                        <td class="displayfirstname"></td>
                        <td class="displaylastname"></td>
                        <td class="displaysex"></td>
                        <td class="displayhaircolor"></td>
                        <td class="displayeyecolor"></td>
                        <td class="displayheight"></td>
                        <td class="displaymaingame"></td>
                    </tr>
                    <tr class="displayguesses">
                        <td class="displayfirstname"></td>
                        <td class="displaylastname"></td>
                        <td class="displaysex"></td>
                        <td class="displayhaircolor"></td>
                        <td class="displayeyecolor"></td>
                        <td class="displayheight"></td>
                        <td class="displaymaingame"></td>
                    </tr>
                    <tr class="displayguesses">
                        <td class="displayfirstname"></td>
                        <td class="displaylastname"></td>
                        <td class="displaysex"></td>
                        <td class="displayhaircolor"></td>
                        <td class="displayeyecolor"></td>
                        <td class="displayheight"></td>
                        <td class="displaymaingame"></td>
                    </tr>
                    <tr class="displayguesses">
                        <td class="displayfirstname"></td>
                        <th  class="displaylastname"></td>
                        <td class="displaysex"></td>
                        <td class="displayhaircolor"></td>
                        <td class="displayeyecolor"></td>
                        <td class="displayheight"></td>
                        <td class="displaymaingame"></td>
                    </tr>
                </table>

        </div>
    </body>

    <script>
        //let fulllist =[];
        var displayguesses = document.querySelectorAll('.displayguesses');
        var numberofguesses=0;
        var therightanswer = "Hajime";
        var characterexists=false;
        var guessedindex=0;
        function userguessed(){

            console.log(fullist);
            console.log(fullist.length);


            if(numberofguesses==5){
                //NO MORE GUESSES FOR THE DAY
            }
            else{

                /*First we should make sure the name the user guessed is within the json, THEN
                iterate through the json list and compare the guessed characters stats with the correct characters stats. Probably have to do a
                if loop for each category and the background color is determined if they are right or not
                */

                for(let x=0;x<fullist.length;x++){
                        if(theguess.value==fullist[x].firstname){
                            //console.log("WE FOUND THE CHARACTER");
                            guessedindex=x;
                            characterexists=true;
                        }
                    }

                    if(characterexists==false){
                        console.log("PLEASE PUT A VALID CHARACTER");
                    }
                    else{
                        displayguesses[numberofguesses].style.display="table-row";
                        document.getElementsByClassName("displayfirstname")[numberofguesses].textContent=theguess.value;
                        document.getElementsByClassName("displaylastname")[numberofguesses].textContent=fullist[guessedindex].lastname;
                        document.getElementsByClassName("displaysex")[numberofguesses].textContent=fullist[guessedindex].sex;
                        document.getElementsByClassName("displayheight")[numberofguesses].textContent=fullist[guessedindex].height;
                        document.getElementsByClassName("displayeyecolor")[numberofguesses].textContent=fullist[guessedindex].eyecolor;
                        document.getElementsByClassName("displayhaircolor")[numberofguesses].textContent=fullist[guessedindex].haircolor;
                        document.getElementsByClassName("displaymaingame")[numberofguesses].textContent=fullist[guessedindex].maingame;


                        numberofguesses++;
                        characterexists=false;
                    }

            }
        }
/*
    function testfunction(istheguessright){
        console.log(istheguessright);
        console.log(fullist);

        if(fulllist){
        }
    } */


        fetch("/dgrtojson")//fetch("http:/localhost:8080/dgrtojson")
        .then(res=>res.json())
        .then(data=>{
            fullist = data;
            //testfunction();
        });

    </script>
</html>
